{"version":3,"sources":["../scripts/videoscript.js"],"names":["VideosSubPage","container","document","querySelector","window","location","href","split","id","videoID","foundVideo","Promise","resolve","reject","xhr","XMLHttpRequest","onload","response","JSON","parse","videoArray","videos","i","length","onerror","open","send","src","displayerror","newHeader","createElement","classList","add","appendChild","createTextNode","title","newVideo","newSource","video","newControlDiv","newButtonRewind","newButtonRewindImage","addEventListener","currentTime","newButtonPlay","newButtonPlayImage","paused","play","pause","newButtonMute","newButtonMuteImage","muted","newButtonFullscreen","newButtonFullscreenImage","requestFullScreen","requestFullscreen","msRequestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","call","newButtonSkip","newButtonSkipImage","timeLeft","duration","console","log","titletext","perror","errortext","load","then","result","display","catch"],"mappings":"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","file":"videoscript.js","sourcesContent":["class VideosSubPage {\r\n  constructor() {\r\n    this.container = document.querySelector('body');\r\n    [, this.id] = window.location.href.split('?id=');\r\n  }\r\n\r\n  // Einhverskonar startup fall\r\n  // Má copya úr aðalskjali þegar það er til\r\n  load() {\r\n    const videoID = this.id;\r\n    let foundVideo = false;\r\n    return new Promise((resolve, reject) => {\r\n      const xhr = new XMLHttpRequest();\r\n      xhr.onload = function() {\r\n          const response = JSON.parse(this.response);\r\n          const videoArray = response.videos;\r\n          for(let i = 0; i < videoArray.length; i++) {\r\n              //Förum varlega; === gerir ekkert type conversion og virkar ekki,\r\n              //en == virkar hins vegar rétt.\r\n              if(videoArray[i].id == videoID) {\r\n                foundVideo = true;\r\n                resolve(videoArray[i]);\r\n              }\r\n          }\r\n          if(!foundVideo) {\r\n              //Ekkert vídeó með þessu id fannst. Ath. að við erum bara að gera\r\n              //eitt hérna: Lesa úr JSON skrá. Ef það gekk þá skilum við\r\n              //resolve, jafnvel þó vídeóið hafi ekki fundist í skránni.\r\n              //Við þurfum þ.afl. að bregðast við því *annars staðar* ef\r\n              //við gátum opnað JSON en fundum ekkert vídeó með þessu ID.\r\n              //Gerum það í display().\r\n              resolve(null);\r\n          }\r\n      };\r\n      xhr.onerror = reject;\r\n      xhr.open('GET', 'videos.json');\r\n      xhr.send();\r\n  });\r\n\r\n  }\r\n\r\n  // Aðalfall til að birta myndband ef það finnst\r\n  // Inntak er source á vídeói\r\n  // HD: Breytti aðeins. Við þurfum að birta titil, poster ofl.,\r\n  // svo ef þetta er aðalfallið verður src að vera ekki bara\r\n  // slóðin á .mp4 skrána, heldur video hlutur með allar þessar upplýsingar.\r\n  display(src) {\r\n\r\n      if(!src){\r\n          this.displayerror();\r\n          //Viljum við hætta hér með \"return;\" ?\r\n      }\r\n      else {\r\n          //Skellum upp elementum með myndbandinu:\r\n\r\n          const newHeader = document.createElement('h1');\r\n          newHeader.classList.add('title');\r\n          newHeader.appendChild(document.createTextNode(src.title));\r\n          this.container.appendChild(newHeader);\r\n\r\n          const newVideo = document.createElement('video');\r\n          newVideo.classList.add('mainvideo');\r\n\r\n          const newSource = document.createElement('source');\r\n          newSource.classList.add('videosource');\r\n          newSource.src = src.video;\r\n          newVideo.appendChild(newSource);\r\n\r\n//HD: Eftirfarandi kóði lætur allt hverfa. Er annað hvort rangur hjá mér, eða\r\n//þarf CSS stílbrögð sem ákveða hvað sést og hvað ekki.\r\n/*\r\n          const newPoster = document.createElement('img');\r\n          newPoster.classList.add('overlay');\r\n          newPoster.src = src.poster;\r\n          newVideo.appendChild(newPoster);\r\n          const newPlayButton = document.createElement('img');\r\n          newPlayButton.classList.add('overlay__play');\r\n          //Varúð, harðkóðað. Gætum líka þurft að parsa .svg skrána eitthvað\r\n          newPlayButton.src = './images/play.svg';\r\n          newVideo.appendChild(newPlayButton);\r\n*/\r\n\r\n          this.container.appendChild(newVideo);\r\n\r\n          const newControlDiv = document.createElement('div');\r\n          newControlDiv.classList.add('controls');\r\n\r\n          const newButtonRewind = document.createElement('button');\r\n          newButtonRewind.classList.add('controls__button');\r\n          newButtonRewind.id = 'rewind';\r\n          const newButtonRewindImage = document.createElement('img');\r\n          newButtonRewindImage.src = './images/back.svg';\r\n          newButtonRewind.appendChild(newButtonRewindImage);\r\n          newControlDiv.appendChild(newButtonRewind);\r\n\r\n          newButtonRewind.addEventListener('click', function () {\r\n              const currentTime = newVideo.currentTime;\r\n              if(currentTime <= 3){\r\n                  newVideo.currentTime = 0;\r\n              } else {\r\n                  newVideo.currentTime -= 3;\r\n              }\r\n          });\r\n\r\n          const newButtonPlay = document.createElement('button');\r\n          newButtonPlay.classList.add('controls__button');\r\n          newButtonPlay.id = 'playpause';\r\n          const newButtonPlayImage = document.createElement('img');\r\n          newButtonPlayImage.src = './images/play.svg';\r\n          newButtonPlay.appendChild(newButtonPlayImage);\r\n          newControlDiv.appendChild(newButtonPlay);\r\n\r\n          newButtonPlay.addEventListener('click', function () {\r\n              if (newVideo.paused) {\r\n                newButtonPlayImage.src = './images/pause.svg';\r\n                newVideo.play();\r\n\r\n              } else {\r\n                newButtonPlayImage.src = './images/play.svg';\r\n                newVideo.pause();\r\n              }\r\n          });\r\n\r\n          const newButtonMute = document.createElement('button');\r\n          newButtonMute.classList.add('controls__button');\r\n          newButtonMute.id = 'mute';\r\n          const newButtonMuteImage = document.createElement('img');\r\n          newButtonMuteImage.src = './images/mute.svg';\r\n          newButtonMute.appendChild(newButtonMuteImage);\r\n          newControlDiv.appendChild(newButtonMute);\r\n\r\n          newButtonMute.addEventListener('click', function () {\r\n              newVideo.muted = !(newVideo.muted);\r\n          });\r\n\r\n          const newButtonFullscreen = document.createElement('button');\r\n          newButtonFullscreen.classList.add('controls__button');\r\n          newButtonFullscreen.id = 'fullscreen';\r\n          const newButtonFullscreenImage = document.createElement('img');\r\n          newButtonFullscreenImage.src = './images/fullscreen.svg';\r\n          newButtonFullscreen.appendChild(newButtonFullscreenImage);\r\n          newControlDiv.appendChild(newButtonFullscreen);\r\n\r\n          newButtonFullscreen.addEventListener('click', function () {\r\n              const requestFullScreen = newVideo.requestFullscreen\r\n                || newVideo.msRequestFullscreen\r\n                || newVideo.mozRequestFullScreen\r\n                || newVideo.webkitRequestFullscreen;\r\n\r\n              requestFullScreen.call(newVideo);\r\n          });\r\n\r\n          const newButtonSkip = document.createElement('button');\r\n          newButtonSkip.classList.add('controls__button');\r\n          newButtonSkip.id = 'skip';\r\n          const newButtonSkipImage = document.createElement('img');\r\n          newButtonSkipImage.src = './images/next.svg';\r\n          newButtonSkip.appendChild(newButtonSkipImage);\r\n          newControlDiv.appendChild(newButtonSkip);\r\n\r\n          newButtonSkip.addEventListener('click', function () {\r\n              const timeLeft = newVideo.duration - newVideo.currentTime;\r\n              console.log(timeLeft);\r\n              if(timeLeft <= 3){\r\n                  newVideo.currentTime = newVideo.duration;\r\n              } else {\r\n                  newVideo.currentTime += 3;\r\n              }\r\n          });\r\n          this.container.appendChild(newControlDiv);\r\n      }\r\n  }\r\n\r\n  // Fall sem birt er ef ekki tekst að ná í videos.json\r\n  // Er einnig keyrt ef ekki finnst myndband með réttu id\r\n  displayerror() {\r\n    const title = document.createElement('h1');\r\n    title.classList.add('title');\r\n    const titletext = document.createTextNode('Myndbandaleigan');\r\n    title.appendChild(titletext);\r\n    this.container.appendChild(titletext);\r\n    const perror = document.createElement('p');\r\n    perror.classList.add('error');\r\n    const errortext = document.createTextNode('Vídeó fannst ekki!');\r\n    perror.appendChild(errortext);\r\n    this.container.appendChild(perror);\r\n  }\r\n}\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n  const video = new VideosSubPage();\r\n  video.load()\r\n    .then((result) => {\r\n      video.display(result);\r\n    })\r\n    .catch(() => {\r\n      // Bregðast við villu hérna.\r\n      //ATH: Villa virðist koma upp sama hvað, svo ég kommenta út\r\n      // displayerror fallið þar til við getum leyst þetta - annars\r\n      // strokar það alltaf allt út af skjánum jafnvel ef vídeóið fannst.\r\n      //video.displayerror();\r\n    });\r\n});\r\n"]}