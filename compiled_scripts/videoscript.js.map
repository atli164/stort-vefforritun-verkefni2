{"version":3,"sources":["../scripts/videoscript.js"],"names":["VideosSubPage","container","document","querySelector","window","location","href","split","id","videoID","foundVideo","Promise","resolve","reject","xhr","XMLHttpRequest","onload","response","JSON","parse","videoArray","videos","i","length","parseInt","onerror","open","send","src","displayerror","newHeader","createElement","classList","add","appendChild","createTextNode","title","newVideo","newSource","video","newControlDiv","newButtonRewind","newButtonRewindImage","addEventListener","currentTime","newButtonPlay","newButtonPlayImage","paused","play","pause","newButtonMute","newButtonMuteImage","muted","newButtonFullscreen","newButtonFullscreenImage","requestFullScreen","requestFullscreen","msRequestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","call","newButtonSkip","newButtonSkipImage","timeLeft","duration","console","log","backDiv","backlink","titletext","perror","errortext","load","then","result","display","catch"],"mappings":"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","file":"videoscript.js","sourcesContent":["class VideosSubPage {\n  constructor() {\n    this.container = document.querySelector('body');\n    [, this.id] = window.location.href.split('?id=');\n  }\n\n  // Einhverskonar startup fall\n  // Má copya úr aðalskjali þegar það er til\n  load() {\n    const videoID = this.id;\n    let foundVideo = false;\n    return new Promise((resolve, reject) => {\n      const xhr = new XMLHttpRequest();\n      xhr.onload = function () {\n        const response = JSON.parse(this.response);\n        const videoArray = response.videos;\n        for (let i = 0; i < videoArray.length; i++) {\n          if (videoArray[i].id == parseInt(videoID)) {\n            foundVideo = true;\n            resolve(videoArray[i]);\n          }\n        }\n        if (!foundVideo) {\n          // Ekkert vídeó með þessu id fannst. Ath. að við erum bara að gera\n          // eitt hérna: Lesa úr JSON skrá. Ef það gekk þá skilum við\n          // resolve, jafnvel þó vídeóið hafi ekki fundist í skránni.\n          // Við þurfum þ.afl. að bregðast við því *annars staðar* ef\n          // við gátum opnað JSON en fundum ekkert vídeó með þessu ID.\n          // Gerum það í display().\n          resolve(null);\n        }\n      };\n      xhr.onerror = reject;\n      xhr.open('GET', 'videos.json');\n      xhr.send();\n    });\n  }\n\n  // Aðalfall til að birta myndband ef það finnst\n  // Inntak er source á vídeói\n  // HD: Breytti aðeins. Við þurfum að birta titil, poster ofl.,\n  // svo ef þetta er aðalfallið verður src að vera ekki bara\n  // slóðin á .mp4 skrána, heldur video hlutur með allar þessar upplýsingar.\n  display(src) {\n    if (!src) {\n      this.displayerror();\n      // Viljum við hætta hér með \"return;\" ?\n    } else {\n      // Skellum upp elementum með myndbandinu:\n      const newHeader = document.createElement('h1');\n      newHeader.classList.add('title');\n      newHeader.appendChild(document.createTextNode(src.title));\n      this.container.appendChild(newHeader);\n\n      const newVideo = document.createElement('video');\n      newVideo.classList.add('mainvideo');\n\n      const newSource = document.createElement('source');\n      newSource.classList.add('videosource');\n      newSource.src = src.video;\n      newVideo.appendChild(newSource);\n\n      // HD: Eftirfarandi kóði lætur allt hverfa. Er annað hvort rangur hjá mér, eða\n      // þarf CSS stílbrögð sem ákveða hvað sést og hvað ekki.\n      /*\n      const newPoster = document.createElement('img');\n      newPoster.classList.add('overlay');\n      newPoster.src = src.poster;\n      newVideo.appendChild(newPoster);\n      const newPlayButton = document.createElement('img');\n      newPlayButton.classList.add('overlay__play');\n      //Varúð, harðkóðað. Gætum líka þurft að parsa .svg skrána eitthvað\n      newPlayButton.src = './images/play.svg';\n      newVideo.appendChild(newPlayButton);\n      */\n\n      this.container.appendChild(newVideo);\n\n      const newControlDiv = document.createElement('div');\n      newControlDiv.classList.add('controls');\n\n      const newButtonRewind = document.createElement('button');\n      newButtonRewind.classList.add('controls__button');\n      newButtonRewind.id = 'rewind';\n      const newButtonRewindImage = document.createElement('img');\n      newButtonRewindImage.src = './images/back.svg';\n      newButtonRewind.appendChild(newButtonRewindImage);\n      newControlDiv.appendChild(newButtonRewind);\n\n      newButtonRewind.addEventListener('click', () => {\n        const currentTime = newVideo.currentTime;\n        if (currentTime <= 3) {\n          newVideo.currentTime = 0;\n        } else {\n          newVideo.currentTime -= 3;\n        }\n      });\n\n      const newButtonPlay = document.createElement('button');\n      newButtonPlay.classList.add('controls__button');\n      newButtonPlay.id = 'playpause';\n      const newButtonPlayImage = document.createElement('img');\n      newButtonPlayImage.src = './images/play.svg';\n      newButtonPlay.appendChild(newButtonPlayImage);\n      newControlDiv.appendChild(newButtonPlay);\n\n      newButtonPlay.addEventListener('click', () => {\n        if (newVideo.paused) {\n          newButtonPlayImage.src = './images/pause.svg';\n          newVideo.play();\n        } else {\n          newButtonPlayImage.src = './images/play.svg';\n          newVideo.pause();\n        }\n      });\n\n      const newButtonMute = document.createElement('button');\n      newButtonMute.classList.add('controls__button');\n      newButtonMute.id = 'mute';\n      const newButtonMuteImage = document.createElement('img');\n      newButtonMuteImage.src = './images/mute.svg';\n      newButtonMute.appendChild(newButtonMuteImage);\n      newControlDiv.appendChild(newButtonMute);\n\n      newButtonMute.addEventListener('click', () => {\n        newVideo.muted = !(newVideo.muted);\n      });\n\n      const newButtonFullscreen = document.createElement('button');\n      newButtonFullscreen.classList.add('controls__button');\n      newButtonFullscreen.id = 'fullscreen';\n      const newButtonFullscreenImage = document.createElement('img');\n      newButtonFullscreenImage.src = './images/fullscreen.svg';\n      newButtonFullscreen.appendChild(newButtonFullscreenImage);\n      newControlDiv.appendChild(newButtonFullscreen);\n\n      newButtonFullscreen.addEventListener('click', () => {\n        const requestFullScreen = newVideo.requestFullscreen\n          || newVideo.msRequestFullscreen\n          || newVideo.mozRequestFullScreen\n          || newVideo.webkitRequestFullscreen;\n\n        requestFullScreen.call(newVideo);\n      });\n\n      const newButtonSkip = document.createElement('button');\n      newButtonSkip.classList.add('controls__button');\n      newButtonSkip.id = 'skip';\n      const newButtonSkipImage = document.createElement('img');\n      newButtonSkipImage.src = './images/next.svg';\n      newButtonSkip.appendChild(newButtonSkipImage);\n      newControlDiv.appendChild(newButtonSkip);\n\n      newButtonSkip.addEventListener('click', () => {\n        const timeLeft = newVideo.duration - newVideo.currentTime;\n        console.log(timeLeft);\n        if (timeLeft <= 3) {\n          newVideo.currentTime = newVideo.duration;\n        } else {\n          newVideo.currentTime += 3;\n        }\n      });\n\n      this.container.appendChild(newControlDiv);\n\n      const backDiv = document.createElement('div');\n      backDiv.classList.add('backdiv');\n      const backlink = document.createElement('a');\n      backlink.classList.add('backlink');\n      // Gætum notað eftirfarandi, en getum ekki endilega treyst því, þar sem\n      // history í sumum browsers getur líka innihaldið smellina á vídeó takkana.\n      // backlink.href = 'javascript:history.back()');\n      // Notum því einfaldlega þetta í staðinn:\n      backlink.href = ('/index.html');\n      backDiv.appendChild(backlink);\n      this.container.appendChild(backDiv);\n    }\n  }\n\n  // Fall sem birt er ef ekki tekst að ná í videos.json\n  // Er einnig keyrt ef ekki finnst myndband með réttu id\n  displayerror() {\n    const title = document.createElement('h1');\n    title.classList.add('title');\n    const titletext = document.createTextNode('Myndbandaleigan');\n    title.appendChild(titletext);\n    this.container.appendChild(titletext);\n    const perror = document.createElement('p');\n    perror.classList.add('error');\n    const errortext = document.createTextNode('Vídeó fannst ekki!');\n    perror.appendChild(errortext);\n    this.container.appendChild(perror);\n    const backDiv = document.createElement('div');\n    backDiv.classList.add('backdiv');\n    const backlink = document.createElement('a');\n    backlink.classList.add('backlink');\n    // Gætum notað eftirfarandi, en getum ekki endilega treyst því, þar sem\n    // history í sumum browsers getur líka innihaldið smellina á vídeó takkana.\n    // backlink.href = 'javascript:history.back()');\n    // Notum því einfaldlega þetta í staðinn:\n    backlink.href = ('/index.html');\n    backDiv.appendChild(backlink);\n    this.container.appendChild(backDiv);\n  }\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const video = new VideosSubPage();\n  video.load()\n    .then((result) => {\n      video.display(result);\n    })\n    .catch(() => {\n      // Bregðast við villu hérna.\n      // ATH: Villa virðist koma upp sama hvað, svo ég kommenta út\n      // displayerror fallið þar til við getum leyst þetta - annars\n      // strokar það alltaf allt út af skjánum jafnvel ef vídeóið fannst.\n      // video.displayerror();\n    });\n});\n"]}