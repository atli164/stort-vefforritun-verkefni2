{"version":3,"sources":["../scripts/videoscript.js"],"names":["VideosSubPage","container","document","querySelector","window","location","href","split","id","playing","videoID","foundVideo","Promise","resolve","reject","xhr","XMLHttpRequest","onload","response","JSON","parse","videoArray","videos","i","length","onerror","open","send","src","displayerror","newHeader","createElement","classList","add","appendChild","createTextNode","title","newVideo","newSource","video","newControlDiv","newButtonRewind","newButtonRewindImage","addEventListener","currentTime","newButtonPlay","newButtonPlayImage","paused","play","pause","newButtonMute","newButtonMuteImage","muted","newButtonFullscreen","newButtonFullscreenImage","requestFullScreen","requestFullscreen","msRequestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","call","newButtonSkip","newButtonSkipImage","timeLeft","duration","console","log","titletext","perror","errortext","load","then","result","display","catch"],"mappings":"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","file":"videoscript.js","sourcesContent":["class VideosSubPage {\n  constructor() {\n    this.container = document.querySelector('body');\n    [, this.id] = window.location.href.split('?id=');\n    // Hjálparbreyta til að vita hvenær overlay á að vera til staðar\n    this.playing = false;\n  }\n\n  // Einhverskonar startup fall\n  // Má copya úr aðalskjali þegar það er til\n  load() {\n    const videoID = this.id;\n    let foundVideo = false;\n    return new Promise((resolve, reject) => {\n      const xhr = new XMLHttpRequest();\n      xhr.onload = function() {\n          const response = JSON.parse(this.response);\n          const videoArray = response.videos;\n          for(let i = 0; i < videoArray.length; i++) {\n              //Förum varlega; === gerir ekkert type conversion og virkar ekki,\n              //en == virkar hins vegar rétt.\n              if(videoArray[i].id == videoID) {\n                foundVideo = true;\n                resolve(videoArray[i]);\n              }\n          }\n          if(!foundVideo) {\n              //Ekkert vídeó með þessu id fannst. Ath. að við erum bara að gera\n              //eitt hérna: Lesa úr JSON skrá. Ef það gekk þá skilum við\n              //resolve, jafnvel þó vídeóið hafi ekki fundist í skránni.\n              //Við þurfum þ.afl. að bregðast við því *annars staðar* ef\n              //við gátum opnað JSON en fundum ekkert vídeó með þessu ID.\n              //Gerum það í display().\n              resolve(null);\n          }\n      };\n      xhr.onerror = reject;\n      xhr.open('GET', 'videos.json');\n      xhr.send();\n  });\n\n  }\n\n  // Hjálparfall sem togglar paused overlay\n  toggleOverlay() {\n\n  }\n\n  // Aðalfall til að birta myndband ef það finnst\n  // Inntak er source á vídeói\n  // HD: Breytti aðeins. Við þurfum að birta titil, poster ofl.,\n  // svo ef þetta er aðalfallið verður src að vera ekki bara\n  // slóðin á .mp4 skrána, heldur video hlutur með allar þessar upplýsingar.\n  display(src) {\n\n      if(!src){\n          this.displayerror();\n          //Viljum við hætta hér með \"return;\" ?\n      }\n      else {\n          //Skellum upp elementum með myndbandinu:\n\n          const newHeader = document.createElement('h1');\n          newHeader.classList.add('title');\n          newHeader.appendChild(document.createTextNode(src.title));\n          this.container.appendChild(newHeader);\n\n          const newVideo = document.createElement('video');\n          newVideo.classList.add('mainvideo');\n\n          const newSource = document.createElement('source');\n          newSource.classList.add('videosource');\n          newSource.src = src.video;\n          newVideo.appendChild(newSource);\n\n//HD: Eftirfarandi kóði lætur allt hverfa. Er annað hvort rangur hjá mér, eða\n//þarf CSS stílbrögð sem ákveða hvað sést og hvað ekki.\n/*\n          const newPoster = document.createElement('img');\n          newPoster.classlist.add('overlay');\n          newPoster.src = src.poster;\n          newVideo.appendChild(newPoster);\n          const newPlayButton = document.createElement('img');\n          newPlayButton.classlist.add('overlay__play');\n          //Varúð, harðkóðað. Gætum líka þurft að parsa .svg skrána eitthvað\n          newPlayButton.src = './images/play.svg';\n          newVideo.appendChild(newPlayButton);\n*/\n\n          this.container.appendChild(newVideo);\n\n          const newControlDiv = document.createElement('div');\n          newControlDiv.classList.add('controls');\n\n          const newButtonRewind = document.createElement('button');\n          newButtonRewind.id = 'rewind';\n          const newButtonRewindImage = document.createElement('img');\n          newButtonRewindImage.src = './images/back.svg';\n          newButtonRewind.appendChild(newButtonRewindImage);\n          newControlDiv.appendChild(newButtonRewind);\n\n          newButtonRewind.addEventListener('click', function () {\n              const currentTime = newVideo.currentTime;\n              if(currentTime <= 3){\n                  newVideo.currentTime = 0;\n              } else {\n                  newVideo.currentTime -= 3;\n              }\n          });\n\n          const newButtonPlay = document.createElement('button');\n          newButtonPlay.id = 'playpause';\n          const newButtonPlayImage = document.createElement('img');\n          newButtonPlayImage.src = './images/play.svg';\n          newButtonPlay.appendChild(newButtonPlayImage);\n          newControlDiv.appendChild(newButtonPlay);\n\n          newButtonPlay.addEventListener('click', function () {\n              if (newVideo.paused) {\n                newButtonPlayImage.src = './images/pause.svg';\n                newVideo.play();\n\n              } else {\n                newButtonPlayImage.src = './images/play.svg';\n                newVideo.pause();\n              }\n          });\n\n          const newButtonMute = document.createElement('button');\n          newButtonMute.id = 'mute';\n          const newButtonMuteImage = document.createElement('img');\n          newButtonMuteImage.src = './images/mute.svg';\n          newButtonMute.appendChild(newButtonMuteImage);\n          newControlDiv.appendChild(newButtonMute);\n\n          newButtonMute.addEventListener('click', function () {\n              newVideo.muted = !(newVideo.muted);\n          });\n\n          const newButtonFullscreen = document.createElement('button');\n          newButtonFullscreen.id = 'fullscreen';\n          const newButtonFullscreenImage = document.createElement('img');\n          newButtonFullscreenImage.src = './images/fullscreen.svg';\n          newButtonFullscreen.appendChild(newButtonFullscreenImage);\n          newControlDiv.appendChild(newButtonFullscreen);\n\n          newButtonFullscreen.addEventListener('click', function () {\n              const requestFullScreen = newVideo.requestFullscreen\n                || newVideo.msRequestFullscreen\n                || newVideo.mozRequestFullScreen\n                || newVideo.webkitRequestFullscreen;\n\n              requestFullScreen.call(newVideo);\n          });\n\n          const newButtonSkip = document.createElement('button');\n          newButtonSkip.id = 'skip';\n          const newButtonSkipImage = document.createElement('img');\n          newButtonSkipImage.src = './images/next.svg';\n          newButtonSkip.appendChild(newButtonSkipImage);\n          newControlDiv.appendChild(newButtonSkip);\n\n          newButtonSkip.addEventListener('click', function () {\n              const timeLeft = newVideo.duration - newVideo.currentTime;\n              console.log(timeLeft);\n              if(timeLeft <= 3){\n                  newVideo.currentTime = newVideo.duration;\n              } else {\n                  newVideo.currentTime += 3;\n              }\n          });\n          this.container.appendChild(newControlDiv);\n      }\n  }\n\n  // Fall sem birt er ef ekki tekst að ná í videos.json\n  // Er einnig keyrt ef ekki finnst myndband með réttu id\n  displayerror() {\n    const title = document.createElement('h1');\n    title.classList.add('title');\n    const titletext = document.createTextNode('Myndbandaleigan');\n    title.appendChild(titletext);\n    this.container.appendChild(titletext);\n    const perror = document.createElement('p');\n    perror.classList.add('error');\n    const errortext = document.createTextNode('Vídeó fannst ekki!');\n    perror.appendChild(errortext);\n    this.container.appendChild(perror);\n  }\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const video = new VideosSubPage();\n  video.load()\n    .then((result) => {\n      video.display(result);\n    })\n    .catch(() => {\n      // Bregðast við villu hérna.\n      //ATH: Villa virðist koma upp sama hvað, svo ég kommenta út\n      // displayerror fallið þar til við getum leyst þetta - annars\n      // strokar það alltaf allt út af skjánum jafnvel ef vídeóið fannst.\n      //video.displayerror();\n    });\n});\n"]}