{"version":3,"sources":["../scripts/script.js"],"names":["VideosMainPage","Promise","resolve","reject","xhr","XMLHttpRequest","onload","JSON","parse","response","onerror","open","send","parsedResults","proofTwo","console","log","created","date","Date","now","year","years","concat","toString","month","months","week","weeks","day","days","hour","hours","duration","min","sec","id","title","dur","age","poster","newbox","document","createElement","classList","add","href","thumb","src","appendChild","ptime","ptimetext","createTextNode","ptitle","ptitletext","page","pagetext","data","videos","forEach","video","parsedObj","parseAge","length","parseDur","categories","category","catBox","catBoxTitle","actualTitle","cv","createVideoElement","addEventListener","load","then","result","catch"],"mappings":"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","file":"script.js","sourcesContent":["class VideosMainPage {\n  // Einhverskonar startup fall\n  load() {\n    // Dæmi um hvernig mætti nota hrátt callback. Skil eftir ef ske kynni\n    // við vildum frekar nota það.\n    /*  const request = new XMLHttpRequest();\n      request.open('GET', 'videos.json', true);\n      request.onload = function() {\n        if (request.status >= 200 && request.status < 400) {\n\n          const data = JSON.parse(request.response);\n          console.log(data);\n        } else {\n          console.error('Villa', request);\n        }\n      };\n\n      request.onerror = function() {\n        console.error('Óþekkt villa');\n      };\n\n      request.send();\n    */\n\n    // Dæmi #2 um hvernig hægt er að ná í JSON gögn með asynchronous hætti,\n    // í þetta sinn með promises. Aðeins ítarlegra en það sem ég endaði á að\n    // nota, skil það eftir ef við endum á að vilja frekar nota þessa aðferð.\n    /*\n      var request = new Request('videos.json', { method: 'GET' });\n      fetch(request)\n        .then(function(response) {\n          if (response.status === 200) {\n            return response.json();\n          }\n          throw new Error('Something went wrong on api server!');\n        })\n        .then(function(response) {\n          // console.log(response);\n          return response;\n        })\n        .catch(function(error) {\n          console.error(error);\n        });\n     */\n\n    return new Promise((resolve, reject) => {\n      const xhr = new XMLHttpRequest();\n      xhr.onload = () => {\n        resolve(JSON.parse(this.response));\n      };\n      xhr.onerror = reject;\n      xhr.open('GET', 'videos.json');\n      xhr.send();\n    });\n  }\n\n  // Throwaway fall til að sýna hvernig við náum gögnum úr asynchronous\n  // promise til að vinna svo með gögnin\n  proofOfConcept(parsedResults) {\n    // console.log(parsedResults);\n    this.proofTwo(parsedResults);\n  }\n\n  // Annað throwaway til að sýna hvernig við hendum gögnum milli falla.\n  proofTwo(parse) {\n    console.log(parse);\n  }\n\n  // Fall sem tekur við created tíma og spýtir út aldursstreng\n  parseAge(created) {\n    const date = new Date(created);\n    const now = new Date();\n    const year = 365 * 24 * 60 * 60 * 1000;\n    if (now - date >= year) {\n      const years = (now - date) / year;\n      if (years === 1) {\n        return 'Fyrir 1 ári síðan';\n      }\n      return 'Fyrir '.concat(toString(years), ' árum síðan');\n    }\n    const month = 30 * 24 * 60 * 60 * 1000;\n    if (now - date >= month) {\n      const months = (now - date) / month;\n      if (months === 1) {\n        return 'Fyrir 1 mánuði síðan';\n      }\n      return 'Fyrir '.concat(toString(months), ' mánuðum síðan');\n    }\n    const week = 7 * 24 * 60 * 60 * 1000;\n    if (now - date >= week) {\n      const weeks = (now - date) / week;\n      if (weeks === 1) {\n        return 'Fyrir 1 viku síðan';\n      }\n      return 'Fyrir '.concat(toString(weeks), ' vikum síðan');\n    }\n    const day = 24 * 60 * 60 * 1000;\n    if (now - date > day) {\n      const days = (now - date) / day;\n      if (days === 1) {\n        return 'Fyrir 1 degi síðan';\n      }\n      return 'Fyrir '.concat(toString(days), ' dögum síðan');\n    }\n    const hour = 60 * 60 * 1000;\n    const hours = (now - date) / hour;\n    if (hours === 0) {\n      return 'Fyrir minna en klukkustund síðan';\n    } else if (hours === 1) {\n      return 'Fyrir 1 klukkustund síðan';\n    }\n    return 'Fyrir '.concat(toString(hours), ' klukkustundum síðan');\n  }\n\n  // Fall sem tekur við duration of spýtir út lengdarstreng\n  parseDur(duration) {\n    const min = duration / 60;\n    const sec = duration % 60;\n    return toString(min).concat(':', toString(sec));\n  }\n\n  // Fall sem býr til eitt div utan um vídeo með aldri, tíma, titli etc.\n  // Kalla þarf á parseföll utan þess falls, þetta tekur við parsed gildum\n  createVideoElement(id, title, dur, age, poster) {\n    const newbox = document.createElement('a');\n    newbox.classList.add('videobox');\n    newbox.href = '/video.html/?id='.concat(toString(id));\n    const thumb = document.createElement('img');\n    thumb.classList.add('videobox__img');\n    thumb.src = poster;\n    newbox.appendChild(thumb);\n    const ptime = document.createElement('p');\n    ptime.classList.add('videobox__time');\n    const ptimetext = document.createTextNode(dur);\n    ptime.appendChild(ptimetext);\n    newbox.appendChild(ptime);\n    const ptitle = document.createElement('p');\n    ptitle.classList.add('videobox__title');\n    const ptitletext = document.createTextNode(title);\n    ptitle.appendChild(ptitletext);\n    newbox.appendChild(ptitle);\n    const page = document.createElement('p');\n    page.classList.add('videobox__age');\n    const pagetext = document.createTextNode(age);\n    page.appendChild(pagetext);\n    newbox.appendChild(page);\n    return newbox;\n  }\n\n  // Grunnfall sem tekur parsaða JSON skrána og fer að deila því\n  // út í myndbandsflokka og einstaka vídeó.\n  parse(data) {\n    const videos = {};\n    data.videos.forEach((video) => {\n      const parsedObj = {};\n      parsedObj.id = video.id;\n      parsedObj.title = video.title;\n      parsedObj.age = this.parseAge(video.created);\n      parsedObj.length = this.parseDur(video.duration);\n      parsedObj.thumb = video.poster;\n      videos[video.id] = parsedObj;\n    });\n    data.categories.forEach((category) => {\n      const catBox = document.createElement('div');\n      catBox.classList.add('videocat');\n      const catBoxTitle = document.createElement('p');\n      catBoxTitle.classList.add('videocat__title');\n      const actualTitle = document.createTextNode(category.title);\n      catBoxTitle.appendChild(actualTitle);\n      catBox.appendChild(catBoxTitle);\n      category.videos.forEach((video) => {\n        const cv = videos[video];\n        catBox.appendChild(this.createVideoElement(cv.id, cv.title, cv.length, cv.dur, cv.thumb));\n      });\n      // Appenda catbox sem child í eitthvað aðaldiv hér\n    });\n  }\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const videos = new VideosMainPage();\n\n  videos.load()\n    .then((result) => {\n      // videos.proofOfConcept(result);\n      videos.parse(result);\n    })\n    .catch(() => {\n      // Bregðast við villu hérna.\n    });\n});\n"]}